(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+qE3":function(e,t,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var a=Number.isNaN||function(e){return e!=e};function s(){s.init.call(this)}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(e){return void 0===e._maxListeners?s.defaultMaxListeners:e._maxListeners}function h(e,t,n,r){var i,o,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(e))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=e,s.type=t,s.count=a.length,console&&console.warn&&console.warn(s)}return e}function p(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,e))}function y(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=p.bind(r);return i.listener=n,r.wrapFn=i,i}function d(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):f(i,i.length)}function c(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||a(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var r="error"===e,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[e];if(void 0===u)return!1;if("function"==typeof u)o(u,this,t);else{var l=u.length,h=f(u,l);for(n=0;n<l;++n)o(h[n],this,t)}return!0},s.prototype.on=s.prototype.addListener=function(e,t){return h(this,e,t,!1)},s.prototype.prependListener=function(e,t){return h(this,e,t,!0)},s.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,y(this,e,t)),this},s.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,y(this,e,t)),this},s.prototype.off=s.prototype.removeListener=function(e,t){var n,r,i,o,a;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},s.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},s.prototype.listeners=function(e){return d(this,e,!0)},s.prototype.rawListeners=function(e){return d(this,e,!1)},s.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):c.call(e,t)},s.prototype.listenerCount=c,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"3V6U":function(e,t,n){"use strict";n.r(t);var r=n("CcnG"),i=function(){return function(){}}(),o=n("pMnS"),a=n("21Lb"),s=n("OzfB"),u=n("lUbc"),l=n("K9Ia"),h=n("mrSG"),p=function(){return function(){}}(),y=function(){var e={Error:0,Unplayable:1,Unstarted:2,Ended:3,Started:4,PlaybackProgress:5,Paused:6,Buffering:7,Cued:8,QualityChanged:9,RateChanged:10};return e[e.Error]="Error",e[e.Unplayable]="Unplayable",e[e.Unstarted]="Unstarted",e[e.Ended]="Ended",e[e.Started]="Started",e[e.PlaybackProgress]="PlaybackProgress",e[e.Paused]="Paused",e[e.Buffering]="Buffering",e[e.Cued]="Cued",e[e.QualityChanged]="QualityChanged",e[e.RateChanged]="RateChanged",e}(),d=function(){function e(){var e=this;this.stateChange$=new l.a,this.eventHandlers=new Map([["error",function(t){return e.broadcastStatusChange(y.Error,t)}],["unplayable",function(t){return e.broadcastStatusChange(y.Unplayable,t)}],["unstarted",function(){return e.broadcastStatusChange(y.Unstarted)}],["ended",function(){return e.broadcastStatusChange(y.Ended)}],["playing",function(){return e.broadcastStatusChange(y.Started)}],["paused",function(){return e.broadcastStatusChange(y.Paused)}],["buffering",function(){return e.broadcastStatusChange(y.Buffering)}],["cued",function(){return e.broadcastStatusChange(y.Cued)}],["playbackQualityChange",function(t){return e.broadcastStatusChange(y.QualityChanged,t)}],["playbackRateChange",function(t){return e.broadcastStatusChange(y.RateChanged,t)}],["timeupdate",function(t){return e.broadcastStatusChange(y.PlaybackProgress,t)}]])}return e.prototype.register=function(e){this.eventHandlers.forEach((function(t,n){e.on(n,t)}))},e.prototype.broadcastStatusChange=function(e,t){this.stateChange$.next({type:e,payload:t})},e.ngInjectableDef=Object(r.Nb)({factory:function(){return new e},token:e,providedIn:p}),e}(),c=function(){function e(e){this.eventsRegistry=e}return Object.defineProperty(e.prototype,"stateChange$",{get:function(){return this.eventsRegistry.stateChange$.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this.player.destroyed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"videoId",{get:function(){return this.player.videoId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"player",{get:function(){return this.ytPlayer},set:function(e){this.ytPlayer=e},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){this.setUpPlayer(e,t),this.eventsRegistry.register(this.player)},e.prototype.load=function(e){this.player.load(e,this.playerOptions&&this.playerOptions.autoplay)},e.prototype.play=function(){this.player.play()},e.prototype.pause=function(){this.player.pause()},e.prototype.stop=function(){this.player.stop()},e.prototype.seek=function(e){this.player.seek(e)},e.prototype.setVolume=function(e){e>100&&console.warn("Provided value "+e+" exceeds max value. 100 used instead"),this.player.setVolume(e)},e.prototype.getVolume=function(){return this.player.getVolume()},e.prototype.mute=function(){this.player.mute()},e.prototype.unMute=function(){this.player.unMute()},e.prototype.isMuted=function(){return this.player.isMuted()},e.prototype.setSize=function(e,t){this.player.setSize(e,t)},e.prototype.setPlaybackRate=function(e){this.player.setPlaybackRate(e)},e.prototype.setPlaybackQuality=function(e){this.player.setPlaybackQuality(e)},e.prototype.getPlaybackRate=function(){return this.player.getPlaybackRate()},e.prototype.getAvailablePlaybackRates=function(){return this.player.getAvailablePlaybackRates()},e.prototype.getDuration=function(){return this.player.getDuration()},e.prototype.getBufferingProgress=function(){return this.player.getProgress()},e.prototype.getState=function(){return this.player.getState()},e.prototype.getCurrentTime=function(){return this.player.getCurrentTime()},e.prototype.destroy=function(){this.player.destroy()},e.prototype.setUpPlayer=function(e,t){this.playerOptions=t,this.player=new u(e,t)},e.ngInjectableDef=Object(r.Nb)({factory:function(){return new e(Object(r.Ob)(d))},token:e,providedIn:p}),e}(),f=function(){function e(){this.charCodes={a:65,z:90},this.idLength=8}return e.prototype.generate=function(){var e=this;return Object(h.__spread)(Array(this.idLength).keys()).reduce((function(t){return""+t+e.getRandomLetter()}),"")},e.prototype.getRandomLetter=function(){var e=this.getRandomIntInRange(this.charCodes.a,this.charCodes.z);return String.fromCharCode(e)},e.prototype.getRandomIntInRange=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},e.ngInjectableDef=Object(r.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),b=function(){function e(){this.queue=new Map}return e.prototype.enqueue=function(e){var t=this.generateKey();this.addTask(t,e)},e.prototype.dequeue=function(){var e=this.getAndRemoveFromQueue();this.execute(e)},e.prototype.addTask=function(e,t){this.queue.set(e,t)},e.prototype.generateKey=function(){return this.queue.size+1},e.prototype.getAndRemoveFromQueue=function(){var e=this.queue.size,t=this.queue.get(e);return this.queue.delete(e),t},e.prototype.execute=function(e){e&&"function"==typeof e&&e()},e.ngInjectableDef=Object(r.Nb)({factory:function(){return new e},token:e,providedIn:"root"}),e}(),v=function(){function e(e,t,n){this.ytPlayerService=e,this.idGeneratorService=t,this.queueService=n,this.stateChange=new r.m,this.errorMessage="Player not initialized. Did you specify [videoId] input property of yt-player-component?"}return e.prototype.ngOnInit=function(){this.setUpElementRefId(),this.dequeuePlayerInitialization(),this.loadVideo(),this.subscribeToStateChanges()},e.prototype.ngOnChanges=function(){this.videoIdIsDefined()&&(this.elementRefIdIsDefined()?this.reloadVideo():this.enqueuePlayerInitialization())},e.prototype.ngOnDestroy=function(){this.ytPlayerService.destroy(),this.stateChangeSubscription.unsubscribe()},e.prototype.setUpElementRefId=function(){var e=this.idGeneratorService.generate();this.ytHtmlElementHook.nativeElement.setAttribute("id",e)},e.prototype.videoIdIsDefined=function(){return!!this.videoId},e.prototype.elementRefIdIsDefined=function(){return this.ytHtmlElementHook.nativeElement&&this.ytHtmlElementHook.nativeElement.getAttribute("id")},e.prototype.initializePlayer=function(){var e=this.ytHtmlElementHook.nativeElement.getAttribute("id");this.ytPlayerService.init("#"+e,this.options)},e.prototype.loadVideo=function(){try{this.ytPlayerService.load(this.videoId)}catch(e){console.error(this.errorMessage)}},e.prototype.reloadVideo=function(){this.ytPlayerService.destroy(),this.initializePlayer(),this.loadVideo()},e.prototype.enqueuePlayerInitialization=function(){var e=this;this.queueService.enqueue((function(){return e.initializePlayer()}))},e.prototype.dequeuePlayerInitialization=function(){this.queueService.dequeue()},e.prototype.subscribeToStateChanges=function(){var e=this;this.stateChangeSubscription=this.ytPlayerService.stateChange$.subscribe((function(t){return e.stateChange.emit(t)}))},e}(),g=function(){return function(){}}(),m=r.rb({encapsulation:2,styles:[],data:{}});function _(e){return r.Jb(0,[r.Gb(402653184,1,{ytHtmlElementHook:0}),(e()(),r.tb(1,0,[[1,0],["ytHtmlElementHook",1]],null,0,"div",[],null,null,null,null,null))],null,null)}var C=n("yGQT"),P=n("wVat"),w=(n("NN75"),n("+sEA"),Object(C.x)("router"),function(e){return e.router.state}),I=n("67Y/"),k=n("xMyE"),S=n("15JJ"),R=n("VnD/"),L=n("dzgT"),E=n("F/XL"),O=function(){function e(e,t){this.store=e,this.ytPlayerService=t,this.videoId="",this.options={autoplay:!0,modestBranding:!0,annotations:!1,related:!1,info:!1}}return Object.defineProperty(e.prototype,"stateAndConfig$",{get:function(){var e=this;return this.store.pipe(Object(C.D)(w),Object(I.a)((function(t){return e.toPlayerConfig(t.queryParams)})),Object(k.a)((function(t){return e.initializePlayer(t)})),Object(S.a)((function(t){return Object(L.a)(e.ytPlayerService.stateChange$,Object(E.a)(t))})),Object(R.a)((function(e){return h.__read(e,1)[0].type===y.PlaybackProgress})))},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){var e=this;this.stateAndConfig$.subscribe((function(t){var n=h.__read(t,2),r=n[0],i=n[1];e.shouldSetPlaybackRate(i)&&e.setPlaybackRate(i),e.playSnippet(r.payload,i)}))},e.prototype.playSnippet=function(e,t){this.shouldSeek(t,e)?this.seek(t.start):this.shouldReset(t,e)&&(this.shouldPlayFromStart=!0)},e.prototype.seek=function(e){this.ytPlayerService.seek(e),this.shouldPlayFromStart=!1},e.prototype.setPlaybackRate=function(e){this.ytPlayerService.setPlaybackRate(e.playbackRate),this.isPlaybackRateSetUp=!0},e.prototype.shouldSeek=function(e,t){return!!(this.shouldPlayFromStart&&e.start&&t)},e.prototype.shouldReset=function(e,t){return!this.shouldPlayFromStart&&e.end&&t>e.end-1},e.prototype.shouldSetPlaybackRate=function(e){return!this.isPlaybackRateSetUp&&e.playbackRate>0},e.prototype.toPlayerConfig=function(e){return{videoId:e.videoId,start:Number(e.start),end:Number(e.end),playbackRate:Number(e.playbackRate)}},e.prototype.initializePlayer=function(e){this.shouldPlayFromStart=!0,this.isPlaybackRateSetUp=!1,this.videoId=e.videoId},e}(),q=r.rb({encapsulation:0,styles:[[""]],data:{}});function j(e){return r.Jb(0,[(e()(),r.tb(0,0,null,null,0,"br",[],null,null,null,null,null)),(e()(),r.tb(1,0,null,null,4,"div",[["fxLayout","row"],["fxLayoutAlign","center"]],null,null,null,null,null)),r.sb(2,671744,null,0,a.c,[r.k,s.i,[2,a.g],s.f],{fxLayout:[0,"fxLayout"]},null),r.sb(3,671744,null,0,a.b,[r.k,s.i,[2,a.f],s.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(e()(),r.tb(4,0,null,null,1,"yt-player",[],null,null,null,_,m)),r.sb(5,770048,null,0,v,[c,f,b],{videoId:[0,"videoId"],options:[1,"options"]},null)],(function(e,t){var n=t.component;e(t,2,0,"row"),e(t,3,0,"center"),e(t,5,0,n.videoId,n.options)}),null)}function T(e){return r.Jb(0,[(e()(),r.tb(0,0,null,null,1,"app-player",[],null,null,null,j,q)),r.sb(1,114688,null,0,O,[C.o,c],null,null)],(function(e,t){e(t,1,0)}),null)}var x=r.pb("app-player",O,T,{},{},[]),A=n("Ip0R"),M=n("ZYCi"),V=function(){return function(){}}(),z=n("Fzqc"),F=n("hUWP"),U=n("3pJQ"),Q=n("V9q+");n.d(t,"PlayerModuleNgFactory",(function(){return D}));var D=r.qb(i,[],(function(e){return r.Bb([r.Cb(512,r.j,r.bb,[[8,[o.a,x]],[3,r.j],r.x]),r.Cb(4608,A.k,A.j,[r.u,[2,A.y]]),r.Cb(5120,r.b,(function(e,t){return[s.j(e,t)]}),[A.c,r.B]),r.Cb(1073742336,A.b,A.b,[]),r.Cb(1073742336,M.q,M.q,[[2,M.w],[2,M.o]]),r.Cb(1073742336,V,V,[]),r.Cb(1024,C.K,(function(){return[{}]}),[]),r.Cb(1024,C.k,(function(){return[{key:"player",reducerFactory:C.u,metaReducers:[],initialState:void 0}]}),[]),r.Cb(1024,C.L,C.R,[r.q,C.K,C.k]),r.Cb(1024,C.J,(function(){return[P.a]}),[]),r.Cb(1024,C.M,(function(e){return[e]}),[C.J]),r.Cb(1024,C.b,(function(e,t,n){return[C.S(e,t,n)]}),[r.q,C.J,C.M]),r.Cb(1073873408,C.p,C.p,[C.L,C.b,C.h,C.q]),r.Cb(1073742336,p,p,[]),r.Cb(1073742336,g,g,[]),r.Cb(1073742336,s.c,s.c,[]),r.Cb(1073742336,z.a,z.a,[]),r.Cb(1073742336,a.d,a.d,[]),r.Cb(1073742336,F.a,F.a,[]),r.Cb(1073742336,U.a,U.a,[]),r.Cb(1073742336,Q.a,Q.a,[[2,s.g],r.B]),r.Cb(1073742336,i,i,[]),r.Cb(1024,M.m,(function(){return[[{path:"",component:O},{path:"/:videoId/:start/:end/:playbackRate",component:O}]]}),[])])}))},DKuG:function(e,t){e.exports=function(e,t,n){return new Promise((r,i)=>{const o=document.createElement("script");o.async=!0,o.src=e;for(let[e,n]of Object.entries(t||{}))o.setAttribute(e,n);o.onload=()=>{o.onerror=o.onload=null,r(o)},o.onerror=()=>{o.onerror=o.onload=null,i(new Error(`Failed to load ${e}`))},(n||document.head||document.getElementsByTagName("head")[0]).appendChild(o)})}},lUbc:function(e,t,n){const r=n("+qE3").EventEmitter,i=n("DKuG"),o={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"cued"},a=[];e.exports=class extends r{constructor(e,t){super();const n="string"==typeof e?document.querySelector(e):e;this._id=n.id?n.id:n.id="ytplayer-"+Math.random().toString(16).slice(2,8),this._opts=Object.assign({width:640,height:360,autoplay:!1,captions:void 0,controls:!0,keyboard:!0,fullscreen:!0,annotations:!0,modestBranding:!1,related:!0,info:!0,timeupdateFrequency:1e3,playsInline:!0},t),this.videoId=null,this.destroyed=!1,this._api=null,this._autoplay=!1,this._player=null,this._ready=!1,this._queue=[],this._interval=null,this._startInterval=this._startInterval.bind(this),this._stopInterval=this._stopInterval.bind(this),this.on("playing",this._startInterval),this.on("unstarted",this._stopInterval),this.on("ended",this._stopInterval),this.on("paused",this._stopInterval),this.on("buffering",this._stopInterval),this._loadIframeAPI((e,t)=>{if(e)return this._destroy(new Error("YouTube Iframe API failed to load"));this._api=t,this.videoId&&this.load(this.videoId,this._autoplay)})}load(e,t=!1){this.destroyed||(this.videoId=e,this._autoplay=t,this._api&&(this._player?this._ready&&(t?this._player.loadVideoById(e):this._player.cueVideoById(e)):this._createPlayer(e)))}play(){this._ready?this._player.playVideo():this._queueCommand("play")}pause(){this._ready?this._player.pauseVideo():this._queueCommand("pause")}stop(){this._ready?this._player.stopVideo():this._queueCommand("stop")}seek(e){this._ready?this._player.seekTo(e,!0):this._queueCommand("seek",e)}setVolume(e){this._ready?this._player.setVolume(e):this._queueCommand("setVolume",e)}getVolume(){return this._ready&&this._player.getVolume()||0}mute(){this._ready?this._player.mute():this._queueCommand("mute")}unMute(){this._ready?this._player.unMute():this._queueCommand("unMute")}isMuted(){return this._ready&&this._player.isMuted()||!1}setSize(e,t){this._ready?this._player.setSize(e,t):this._queueCommand("setSize",e,t)}setPlaybackRate(e){this._ready?this._player.setPlaybackRate(e):this._queueCommand("setPlaybackRate",e)}setPlaybackQuality(e){this._ready?this._player.setPlaybackQuality(e):this._queueCommand("setPlaybackQuality",e)}getPlaybackRate(){return this._ready&&this._player.getPlaybackRate()||1}getAvailablePlaybackRates(){return this._ready&&this._player.getAvailablePlaybackRates()||[1]}getDuration(){return this._ready&&this._player.getDuration()||0}getProgress(){return this._ready&&this._player.getVideoLoadedFraction()||0}getState(){return this._ready&&o[this._player.getPlayerState()]||"unstarted"}getCurrentTime(){return this._ready&&this._player.getCurrentTime()||0}destroy(){this._destroy()}_destroy(e){this.destroyed||(this.destroyed=!0,this._player&&(this._player.stopVideo&&this._player.stopVideo(),this._player.destroy()),this.videoId=null,this._id=null,this._opts=null,this._api=null,this._player=null,this._ready=!1,this._queue=null,this._stopInterval(),this.removeListener("playing",this._startInterval),this.removeListener("paused",this._stopInterval),this.removeListener("buffering",this._stopInterval),this.removeListener("unstarted",this._stopInterval),this.removeListener("ended",this._stopInterval),e&&this.emit("error",e))}_queueCommand(e,...t){this.destroyed||this._queue.push([e,t])}_flushQueue(){for(;this._queue.length;){const e=this._queue.shift();this[e[0]].apply(this,e[1])}}_loadIframeAPI(e){if(window.YT&&"function"==typeof window.YT.Player)return e(null,window.YT);a.push(e),Array.from(document.getElementsByTagName("script")).some(e=>"https://www.youtube.com/iframe_api"===e.src)||i("https://www.youtube.com/iframe_api").catch(e=>{for(;a.length;)a.shift()(e)}),"function"!=typeof window.onYouTubeIframeAPIReady&&(window.onYouTubeIframeAPIReady=()=>{for(;a.length;)a.shift()(null,window.YT)})}_createPlayer(e){if(this.destroyed)return;const t=this._opts;this._player=new this._api.Player(this._id,{width:t.width,height:t.height,videoId:e,playerVars:{autoplay:t.autoplay?1:0,cc_load_policy:null!=t.captions?!1!==t.captions?1:0:void 0,hl:null!=t.captions&&!1!==t.captions?t.captions:void 0,cc_lang_pref:null!=t.captions&&!1!==t.captions?t.captions:void 0,controls:t.controls?2:0,disablekb:t.keyboard?0:1,enablejsapi:1,fs:t.fullscreen?1:0,iv_load_policy:t.annotations?1:3,modestbranding:t.modestBranding?1:0,origin:window.location.origin,playsinline:t.playsInline?1:0,rel:t.related?1:0,showinfo:t.info?1:0,wmode:"opaque"},events:{onReady:()=>this._onReady(e),onStateChange:e=>this._onStateChange(e),onPlaybackQualityChange:e=>this._onPlaybackQualityChange(e),onPlaybackRateChange:e=>this._onPlaybackRateChange(e),onError:e=>this._onError(e)}})}_onReady(e){this.destroyed||(this._ready=!0,this.load(this.videoId,this._autoplay),this._flushQueue())}_onStateChange(e){if(this.destroyed)return;const t=o[e.data];if(!t)throw new Error("Unrecognized state change: "+e);["paused","buffering","ended"].includes(t)&&this._onTimeupdate(),this.emit(t),["unstarted","playing","cued"].includes(t)&&this._onTimeupdate()}_onPlaybackQualityChange(e){this.destroyed||this.emit("playbackQualityChange",e.data)}_onPlaybackRateChange(e){this.destroyed||this.emit("playbackRateChange",e.data)}_onError(e){if(this.destroyed)return;const t=e.data;return 5!==t?101===t||150===t||100===t||2===t?this.emit("unplayable",this.videoId):void this._destroy(new Error("YouTube Player Error. Unknown error code: "+t)):void 0}_onTimeupdate(){this.emit("timeupdate",this.getCurrentTime())}_startInterval(){this._interval=setInterval(()=>this._onTimeupdate(),this._opts.timeupdateFrequency)}_stopInterval(){clearInterval(this._interval),this._interval=null}}}}]);