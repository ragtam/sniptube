(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"+qE3":function(t,e,n){"use strict";var r,i="object"==typeof Reflect?Reflect:null,o=i&&"function"==typeof i.apply?i.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};r=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function s(){s.init.call(this)}t.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._eventsCount=0,s.prototype._maxListeners=void 0;var u=10;function l(t){return void 0===t._maxListeners?s.defaultMaxListeners:t._maxListeners}function p(t,e,n,r){var i,o,a;if("function"!=typeof n)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof n);if(void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),a=o[e]),void 0===a)a=o[e]=n,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=l(t))>0&&a.length>i&&!a.warned){a.warned=!0;var s=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");s.name="MaxListenersExceededWarning",s.emitter=t,s.type=e,s.count=a.length,console&&console.warn&&console.warn(s)}return t}function c(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,o(this.listener,this.target,t))}function h(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=c.bind(r);return i.listener=n,r.wrapFn=i,i}function y(t,e,n){var r=t._events;if(void 0===r)return[];var i=r[e];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(i):f(i,i.length)}function d(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function f(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}Object.defineProperty(s,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),s.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},s.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},s.prototype.getMaxListeners=function(){return l(this)},s.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var r="error"===t,i=this._events;if(void 0!==i)r=r&&void 0===i.error;else if(!r)return!1;if(r){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var l=u.length,p=f(u,l);for(n=0;n<l;++n)o(p[n],this,e)}return!0},s.prototype.on=s.prototype.addListener=function(t,e){return p(this,t,e,!1)},s.prototype.prependListener=function(t,e){return p(this,t,e,!0)},s.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.on(t,h(this,t,e)),this},s.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);return this.prependListener(t,h(this,t,e)),this},s.prototype.off=s.prototype.removeListener=function(t,e){var n,r,i,o,a;if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e);if(void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===e||n[o].listener===e){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,i),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},s.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},s.prototype.listeners=function(t){return y(this,t,!0)},s.prototype.rawListeners=function(t){return y(this,t,!1)},s.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):d.call(t,e)},s.prototype.listenerCount=d,s.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},"3V6U":function(t,e,n){"use strict";n.r(e);var r=n("CcnG"),i=function(){return function(){}}(),o=n("pMnS"),a=n("21Lb"),s=n("OzfB"),u=n("lUbc"),l=n("K9Ia"),p=n("mrSG"),c=function(){return function(){}}(),h=function(){var t={Error:0,Unplayable:1,Unstarted:2,Ended:3,Started:4,PlaybackProgress:5,Paused:6,Buffering:7,Cued:8,QualityChanged:9,RateChanged:10};return t[t.Error]="Error",t[t.Unplayable]="Unplayable",t[t.Unstarted]="Unstarted",t[t.Ended]="Ended",t[t.Started]="Started",t[t.PlaybackProgress]="PlaybackProgress",t[t.Paused]="Paused",t[t.Buffering]="Buffering",t[t.Cued]="Cued",t[t.QualityChanged]="QualityChanged",t[t.RateChanged]="RateChanged",t}(),y=function(){function t(){var t=this;this.stateChange$=new l.a,this.eventHandlers=new Map([["error",function(e){return t.broadcastStatusChange(h.Error,e)}],["unplayable",function(e){return t.broadcastStatusChange(h.Unplayable,e)}],["unstarted",function(){return t.broadcastStatusChange(h.Unstarted)}],["ended",function(){return t.broadcastStatusChange(h.Ended)}],["playing",function(){return t.broadcastStatusChange(h.Started)}],["paused",function(){return t.broadcastStatusChange(h.Paused)}],["buffering",function(){return t.broadcastStatusChange(h.Buffering)}],["cued",function(){return t.broadcastStatusChange(h.Cued)}],["playbackQualityChange",function(e){return t.broadcastStatusChange(h.QualityChanged,e)}],["playbackRateChange",function(e){return t.broadcastStatusChange(h.RateChanged,e)}],["timeupdate",function(e){return t.broadcastStatusChange(h.PlaybackProgress,e)}]])}return t.prototype.register=function(t){this.eventHandlers.forEach((function(e,n){t.on(n,e)}))},t.prototype.broadcastStatusChange=function(t,e){this.stateChange$.next({type:t,payload:e})},t.ngInjectableDef=Object(r.Nb)({factory:function(){return new t},token:t,providedIn:c}),t}(),d=function(){function t(t){this.eventsRegistry=t}return Object.defineProperty(t.prototype,"stateChange$",{get:function(){return this.eventsRegistry.stateChange$.asObservable()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"destroyed",{get:function(){return this.player.destroyed},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"videoId",{get:function(){return this.player.videoId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"player",{get:function(){return this.ytPlayer},set:function(t){this.ytPlayer=t},enumerable:!0,configurable:!0}),t.prototype.init=function(t,e){this.setUpPlayer(t,e),this.eventsRegistry.register(this.player)},t.prototype.load=function(t){this.player.load(t,this.playerOptions&&this.playerOptions.autoplay)},t.prototype.play=function(){this.player.play()},t.prototype.pause=function(){this.player.pause()},t.prototype.stop=function(){this.player.stop()},t.prototype.seek=function(t){this.player.seek(t)},t.prototype.setVolume=function(t){t>100&&console.warn("Provided value "+t+" exceeds max value. 100 used instead"),this.player.setVolume(t)},t.prototype.getVolume=function(){return this.player.getVolume()},t.prototype.mute=function(){this.player.mute()},t.prototype.unMute=function(){this.player.unMute()},t.prototype.isMuted=function(){return this.player.isMuted()},t.prototype.setSize=function(t,e){this.player.setSize(t,e)},t.prototype.setPlaybackRate=function(t){this.player.setPlaybackRate(t)},t.prototype.setPlaybackQuality=function(t){this.player.setPlaybackQuality(t)},t.prototype.getPlaybackRate=function(){return this.player.getPlaybackRate()},t.prototype.getAvailablePlaybackRates=function(){return this.player.getAvailablePlaybackRates()},t.prototype.getDuration=function(){return this.player.getDuration()},t.prototype.getBufferingProgress=function(){return this.player.getProgress()},t.prototype.getState=function(){return this.player.getState()},t.prototype.getCurrentTime=function(){return this.player.getCurrentTime()},t.prototype.destroy=function(){this.player.destroy()},t.prototype.setUpPlayer=function(t,e){this.playerOptions=e,this.player=new u(t,e)},t.ngInjectableDef=Object(r.Nb)({factory:function(){return new t(Object(r.Ob)(y))},token:t,providedIn:c}),t}(),f=function(){function t(){this.charCodes={a:65,z:90},this.idLength=8}return t.prototype.generate=function(){var t=this;return Object(p.__spread)(Array(this.idLength).keys()).reduce((function(e){return""+e+t.getRandomLetter()}),"")},t.prototype.getRandomLetter=function(){var t=this.getRandomIntInRange(this.charCodes.a,this.charCodes.z);return String.fromCharCode(t)},t.prototype.getRandomIntInRange=function(t,e){return Math.floor(Math.random()*(e-t+1))+t},t.ngInjectableDef=Object(r.Nb)({factory:function(){return new t},token:t,providedIn:"root"}),t}(),b=function(){function t(){this.queue=new Map}return t.prototype.enqueue=function(t){var e=this.generateKey();this.addTask(e,t)},t.prototype.dequeue=function(){var t=this.getAndRemoveFromQueue();this.execute(t)},t.prototype.addTask=function(t,e){this.queue.set(t,e)},t.prototype.generateKey=function(){return this.queue.size+1},t.prototype.getAndRemoveFromQueue=function(){var t=this.queue.size,e=this.queue.get(t);return this.queue.delete(t),e},t.prototype.execute=function(t){t&&"function"==typeof t&&t()},t.ngInjectableDef=Object(r.Nb)({factory:function(){return new t},token:t,providedIn:"root"}),t}(),g=function(){function t(t,e,n){this.ytPlayerService=t,this.idGeneratorService=e,this.queueService=n,this.stateChange=new r.m,this.errorMessage="Player not initialized. Did you specify [videoId] input property of yt-player-component?"}return t.prototype.ngOnInit=function(){this.setUpElementRefId(),this.dequeuePlayerInitialization(),this.loadVideo(),this.subscribeToStateChanges()},t.prototype.ngOnChanges=function(){this.videoIdIsDefined()&&(this.elementRefIdIsDefined()?this.reloadVideo():this.enqueuePlayerInitialization())},t.prototype.ngOnDestroy=function(){this.ytPlayerService.destroy(),this.stateChangeSubscription.unsubscribe()},t.prototype.setUpElementRefId=function(){var t=this.idGeneratorService.generate();this.ytHtmlElementHook.nativeElement.setAttribute("id",t)},t.prototype.videoIdIsDefined=function(){return!!this.videoId},t.prototype.elementRefIdIsDefined=function(){return this.ytHtmlElementHook.nativeElement&&this.ytHtmlElementHook.nativeElement.getAttribute("id")},t.prototype.initializePlayer=function(){var t=this.ytHtmlElementHook.nativeElement.getAttribute("id");this.ytPlayerService.init("#"+t,this.options)},t.prototype.loadVideo=function(){try{this.ytPlayerService.load(this.videoId)}catch(t){console.error(this.errorMessage)}},t.prototype.reloadVideo=function(){this.ytPlayerService.destroy(),this.initializePlayer(),this.loadVideo()},t.prototype.enqueuePlayerInitialization=function(){var t=this;this.queueService.enqueue((function(){return t.initializePlayer()}))},t.prototype.dequeuePlayerInitialization=function(){this.queueService.dequeue()},t.prototype.subscribeToStateChanges=function(){var t=this;this.stateChangeSubscription=this.ytPlayerService.stateChange$.subscribe((function(e){return t.stateChange.emit(e)}))},t}(),v=function(){return function(){}}(),m=r.rb({encapsulation:2,styles:[],data:{}});function _(t){return r.Jb(0,[r.Gb(402653184,1,{ytHtmlElementHook:0}),(t()(),r.tb(1,0,[[1,0],["ytHtmlElementHook",1]],null,0,"div",[],null,null,null,null,null))],null,null)}var C=function(){function t(){}return t.prototype.ngOnChanges=function(t){console.log("conf",this.config,t.config);var e=t&&t.config&&t.config.currentValue;e&&(this.duration=e.duration,this.rates=e.playbackRates)},t}(),P=r.rb({encapsulation:0,styles:[[""]],data:{}});function k(t){return r.Jb(2,[(t()(),r.tb(0,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(1,null,["duration: ",""])),(t()(),r.tb(2,0,null,null,1,"p",[],null,null,null,null,null)),(t()(),r.Ib(3,null,["rates: ",""]))],null,(function(t,e){var n=e.component;t(e,1,0,n.duration),t(e,3,0,n.rates)}))}var w=n("yGQT"),I=n("wVat"),S=(n("NN75"),n("+sEA"),Object(w.x)("router"),function(t){return t.router.state}),R=n("67Y/"),O=n("xMyE"),L=n("15JJ"),E=n("VnD/"),q=n("dzgT"),j=n("F/XL"),x=n("ny24");function T(t){return"function"==typeof t}var A=function(t,e){return void 0===e&&(e="ngOnDestroy"),function(n){var r=t[e];if(!1===T(r))throw new Error(t.constructor.name+" is using untilDestroyed but doesn't implement "+e);return t.__takeUntilDestroy||(t.__takeUntilDestroy=new l.a,t[e]=function(){T(r)&&r.apply(this,arguments),t.__takeUntilDestroy.next(!0),t.__takeUntilDestroy.complete()}),n.pipe(Object(x.a)(t.__takeUntilDestroy))}},M=function(){function t(t,e){this.store=t,this.ytPlayerService=e,this.videoId="",this.options={autoplay:!0,modestBranding:!0,annotations:!1,related:!1,info:!1}}return Object.defineProperty(t.prototype,"stateAndConfig$",{get:function(){var t=this;return this.store.pipe(Object(w.D)(S),Object(R.a)((function(e){return t.toPlayerConfig(e.queryParams)})),Object(O.a)((function(e){return t.initializePlayer(e)})),Object(L.a)((function(e){return Object(q.a)(t.ytPlayerService.stateChange$,Object(j.a)(e))})))},enumerable:!0,configurable:!0}),t.prototype.ngOnInit=function(){this.subscribeOnStartedState(),this.subscribeOnPlaybackProgressState()},t.prototype.ngOnDestroy=function(){},t.prototype.subscribeOnPlaybackProgressState=function(){var t=this;this.stateAndConfig$.pipe(Object(E.a)((function(t){return p.__read(t,1)[0].type===h.PlaybackProgress})),A(this)).subscribe((function(e){var n=p.__read(e,2),r=n[0],i=n[1];t.shouldSetPlaybackRate(i)&&t.setPlaybackRate(i),t.playSnippet(r.payload,i)}))},t.prototype.subscribeOnStartedState=function(){var t=this;this.stateAndConfig$.pipe(Object(E.a)((function(t){return p.__read(t,1)[0].type===h.Started})),A(this)).subscribe((function(){t.initializeEditorConfig()}))},t.prototype.playSnippet=function(t,e){this.shouldSeek(e,t)?this.seek(e.start):this.shouldReset(e,t)&&(this.shouldPlayFromStart=!0)},t.prototype.seek=function(t){this.ytPlayerService.seek(t),this.shouldPlayFromStart=!1},t.prototype.setPlaybackRate=function(t){this.ytPlayerService.setPlaybackRate(t.playbackRate),this.isPlaybackRateSetUp=!0},t.prototype.shouldSeek=function(t,e){return!!(this.shouldPlayFromStart&&t.start&&e)},t.prototype.shouldReset=function(t,e){return!this.shouldPlayFromStart&&t.end&&e>t.end-1},t.prototype.shouldSetPlaybackRate=function(t){return!this.isPlaybackRateSetUp&&t.playbackRate>0},t.prototype.toPlayerConfig=function(t){return{videoId:t.videoId,start:Number(t.start),end:Number(t.end),playbackRate:Number(t.playbackRate)}},t.prototype.initializePlayer=function(t){this.shouldPlayFromStart=!0,this.isPlaybackRateSetUp=!1,this.videoId=t.videoId},t.prototype.initializeEditorConfig=function(){this.editorConfig||(this.editorConfig={duration:this.ytPlayerService.getDuration(),playbackRates:this.ytPlayerService.getAvailablePlaybackRates()})},t}(),U=r.rb({encapsulation:0,styles:[[""]],data:{}});function V(t){return r.Jb(0,[(t()(),r.tb(0,0,null,null,0,"br",[],null,null,null,null,null)),(t()(),r.tb(1,0,null,null,4,"div",[["fxLayout","row"],["fxLayoutAlign","center"]],null,null,null,null,null)),r.sb(2,671744,null,0,a.c,[r.k,s.i,[2,a.g],s.f],{fxLayout:[0,"fxLayout"]},null),r.sb(3,671744,null,0,a.b,[r.k,s.i,[2,a.f],s.f],{fxLayoutAlign:[0,"fxLayoutAlign"]},null),(t()(),r.tb(4,0,null,null,1,"yt-player",[],null,null,null,_,m)),r.sb(5,770048,null,0,g,[d,f,b],{videoId:[0,"videoId"],options:[1,"options"]},null),(t()(),r.tb(6,0,null,null,3,"div",[["fxLayout","row"],["fxLayoutAligh","center"]],null,null,null,null,null)),r.sb(7,671744,null,0,a.c,[r.k,s.i,[2,a.g],s.f],{fxLayout:[0,"fxLayout"]},null),(t()(),r.tb(8,0,null,null,1,"app-editor",[],null,null,null,k,P)),r.sb(9,573440,null,0,C,[],{config:[0,"config"]},null)],(function(t,e){var n=e.component;t(e,2,0,"row"),t(e,3,0,"center"),t(e,5,0,n.videoId,n.options),t(e,7,0,"row"),t(e,9,0,n.editorConfig)}),null)}function D(t){return r.Jb(0,[(t()(),r.tb(0,0,null,null,1,"ng-component",[],null,null,null,V,U)),r.sb(1,245760,null,0,M,[w.o,d],null,null)],(function(t,e){t(e,1,0)}),null)}var z=r.pb("ng-component",M,D,{},{},[]),F=n("Ip0R"),Q=n("ZYCi"),N=function(){return function(){}}(),B=n("Fzqc"),H=n("hUWP"),J=n("3pJQ"),Y=n("V9q+");n.d(e,"PlayerModuleNgFactory",(function(){return $}));var $=r.qb(i,[],(function(t){return r.Bb([r.Cb(512,r.j,r.bb,[[8,[o.a,z]],[3,r.j],r.x]),r.Cb(4608,F.k,F.j,[r.u,[2,F.y]]),r.Cb(5120,r.b,(function(t,e){return[s.j(t,e)]}),[F.c,r.B]),r.Cb(1073742336,F.b,F.b,[]),r.Cb(1073742336,Q.q,Q.q,[[2,Q.w],[2,Q.o]]),r.Cb(1073742336,N,N,[]),r.Cb(1024,w.K,(function(){return[{}]}),[]),r.Cb(1024,w.k,(function(){return[{key:"player",reducerFactory:w.u,metaReducers:[],initialState:void 0}]}),[]),r.Cb(1024,w.L,w.R,[r.q,w.K,w.k]),r.Cb(1024,w.J,(function(){return[I.a]}),[]),r.Cb(1024,w.M,(function(t){return[t]}),[w.J]),r.Cb(1024,w.b,(function(t,e,n){return[w.S(t,e,n)]}),[r.q,w.J,w.M]),r.Cb(1073873408,w.p,w.p,[w.L,w.b,w.h,w.q]),r.Cb(1073742336,c,c,[]),r.Cb(1073742336,v,v,[]),r.Cb(1073742336,s.c,s.c,[]),r.Cb(1073742336,B.a,B.a,[]),r.Cb(1073742336,a.d,a.d,[]),r.Cb(1073742336,H.a,H.a,[]),r.Cb(1073742336,J.a,J.a,[]),r.Cb(1073742336,Y.a,Y.a,[[2,s.g],r.B]),r.Cb(1073742336,i,i,[]),r.Cb(1024,Q.m,(function(){return[[{path:"",component:M},{path:"/:videoId/:start/:end/:playbackRate",component:M}]]}),[])])}))},DKuG:function(t,e){t.exports=function(t,e,n){return new Promise((r,i)=>{const o=document.createElement("script");o.async=!0,o.src=t;for(let[t,n]of Object.entries(e||{}))o.setAttribute(t,n);o.onload=()=>{o.onerror=o.onload=null,r(o)},o.onerror=()=>{o.onerror=o.onload=null,i(new Error(`Failed to load ${t}`))},(n||document.head||document.getElementsByTagName("head")[0]).appendChild(o)})}},lUbc:function(t,e,n){const r=n("+qE3").EventEmitter,i=n("DKuG"),o={"-1":"unstarted",0:"ended",1:"playing",2:"paused",3:"buffering",5:"cued"},a=[];t.exports=class extends r{constructor(t,e){super();const n="string"==typeof t?document.querySelector(t):t;this._id=n.id?n.id:n.id="ytplayer-"+Math.random().toString(16).slice(2,8),this._opts=Object.assign({width:640,height:360,autoplay:!1,captions:void 0,controls:!0,keyboard:!0,fullscreen:!0,annotations:!0,modestBranding:!1,related:!0,info:!0,timeupdateFrequency:1e3,playsInline:!0},e),this.videoId=null,this.destroyed=!1,this._api=null,this._autoplay=!1,this._player=null,this._ready=!1,this._queue=[],this._interval=null,this._startInterval=this._startInterval.bind(this),this._stopInterval=this._stopInterval.bind(this),this.on("playing",this._startInterval),this.on("unstarted",this._stopInterval),this.on("ended",this._stopInterval),this.on("paused",this._stopInterval),this.on("buffering",this._stopInterval),this._loadIframeAPI((t,e)=>{if(t)return this._destroy(new Error("YouTube Iframe API failed to load"));this._api=e,this.videoId&&this.load(this.videoId,this._autoplay)})}load(t,e=!1){this.destroyed||(this.videoId=t,this._autoplay=e,this._api&&(this._player?this._ready&&(e?this._player.loadVideoById(t):this._player.cueVideoById(t)):this._createPlayer(t)))}play(){this._ready?this._player.playVideo():this._queueCommand("play")}pause(){this._ready?this._player.pauseVideo():this._queueCommand("pause")}stop(){this._ready?this._player.stopVideo():this._queueCommand("stop")}seek(t){this._ready?this._player.seekTo(t,!0):this._queueCommand("seek",t)}setVolume(t){this._ready?this._player.setVolume(t):this._queueCommand("setVolume",t)}getVolume(){return this._ready&&this._player.getVolume()||0}mute(){this._ready?this._player.mute():this._queueCommand("mute")}unMute(){this._ready?this._player.unMute():this._queueCommand("unMute")}isMuted(){return this._ready&&this._player.isMuted()||!1}setSize(t,e){this._ready?this._player.setSize(t,e):this._queueCommand("setSize",t,e)}setPlaybackRate(t){this._ready?this._player.setPlaybackRate(t):this._queueCommand("setPlaybackRate",t)}setPlaybackQuality(t){this._ready?this._player.setPlaybackQuality(t):this._queueCommand("setPlaybackQuality",t)}getPlaybackRate(){return this._ready&&this._player.getPlaybackRate()||1}getAvailablePlaybackRates(){return this._ready&&this._player.getAvailablePlaybackRates()||[1]}getDuration(){return this._ready&&this._player.getDuration()||0}getProgress(){return this._ready&&this._player.getVideoLoadedFraction()||0}getState(){return this._ready&&o[this._player.getPlayerState()]||"unstarted"}getCurrentTime(){return this._ready&&this._player.getCurrentTime()||0}destroy(){this._destroy()}_destroy(t){this.destroyed||(this.destroyed=!0,this._player&&(this._player.stopVideo&&this._player.stopVideo(),this._player.destroy()),this.videoId=null,this._id=null,this._opts=null,this._api=null,this._player=null,this._ready=!1,this._queue=null,this._stopInterval(),this.removeListener("playing",this._startInterval),this.removeListener("paused",this._stopInterval),this.removeListener("buffering",this._stopInterval),this.removeListener("unstarted",this._stopInterval),this.removeListener("ended",this._stopInterval),t&&this.emit("error",t))}_queueCommand(t,...e){this.destroyed||this._queue.push([t,e])}_flushQueue(){for(;this._queue.length;){const t=this._queue.shift();this[t[0]].apply(this,t[1])}}_loadIframeAPI(t){if(window.YT&&"function"==typeof window.YT.Player)return t(null,window.YT);a.push(t),Array.from(document.getElementsByTagName("script")).some(t=>"https://www.youtube.com/iframe_api"===t.src)||i("https://www.youtube.com/iframe_api").catch(t=>{for(;a.length;)a.shift()(t)}),"function"!=typeof window.onYouTubeIframeAPIReady&&(window.onYouTubeIframeAPIReady=()=>{for(;a.length;)a.shift()(null,window.YT)})}_createPlayer(t){if(this.destroyed)return;const e=this._opts;this._player=new this._api.Player(this._id,{width:e.width,height:e.height,videoId:t,playerVars:{autoplay:e.autoplay?1:0,cc_load_policy:null!=e.captions?!1!==e.captions?1:0:void 0,hl:null!=e.captions&&!1!==e.captions?e.captions:void 0,cc_lang_pref:null!=e.captions&&!1!==e.captions?e.captions:void 0,controls:e.controls?2:0,disablekb:e.keyboard?0:1,enablejsapi:1,fs:e.fullscreen?1:0,iv_load_policy:e.annotations?1:3,modestbranding:e.modestBranding?1:0,origin:window.location.origin,playsinline:e.playsInline?1:0,rel:e.related?1:0,showinfo:e.info?1:0,wmode:"opaque"},events:{onReady:()=>this._onReady(t),onStateChange:t=>this._onStateChange(t),onPlaybackQualityChange:t=>this._onPlaybackQualityChange(t),onPlaybackRateChange:t=>this._onPlaybackRateChange(t),onError:t=>this._onError(t)}})}_onReady(t){this.destroyed||(this._ready=!0,this.load(this.videoId,this._autoplay),this._flushQueue())}_onStateChange(t){if(this.destroyed)return;const e=o[t.data];if(!e)throw new Error("Unrecognized state change: "+t);["paused","buffering","ended"].includes(e)&&this._onTimeupdate(),this.emit(e),["unstarted","playing","cued"].includes(e)&&this._onTimeupdate()}_onPlaybackQualityChange(t){this.destroyed||this.emit("playbackQualityChange",t.data)}_onPlaybackRateChange(t){this.destroyed||this.emit("playbackRateChange",t.data)}_onError(t){if(this.destroyed)return;const e=t.data;return 5!==e?101===e||150===e||100===e||2===e?this.emit("unplayable",this.videoId):void this._destroy(new Error("YouTube Player Error. Unknown error code: "+e)):void 0}_onTimeupdate(){this.emit("timeupdate",this.getCurrentTime())}_startInterval(){this._interval=setInterval(()=>this._onTimeupdate(),this._opts.timeupdateFrequency)}_stopInterval(){clearInterval(this._interval),this._interval=null}}}}]);